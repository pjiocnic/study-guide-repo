# 1. Predicate example

```java
import org.apache.commons.collections4.CollectionUtils;
import org.apache.commons.collections4.Predicate;

// ...

List<String> inputList = Arrays.asList("apple", "banana", "orange", "grape");

Predicate<String> filterPredicate = new Predicate<String>() {
    @Override
    public boolean evaluate(String object) {
        return object.startsWith("a");
    }
};

List<String> filteredList = (List<String>) CollectionUtils.select(inputList, filterPredicate);
System.out.println(filteredList);

```

# 2. Filtering example

```java
import java.util.Arrays;
import java.util.List;
import java.util.stream.Collectors;

// ...

List<String> inputList = Arrays.asList("apple", "banana", "orange", "grape");

List<String> filteredList = inputList.stream()
                                     .filter(s -> s.startsWith("a"))
                                     .collect(Collectors.toList());

System.out.println(filteredList);

```

collections.filter((SubList, Predicate))

# 3. Group by example

```java
import java.util.*;
import java.util.stream.Collectors;

public class Main {
    public static void main(String[] args) {

        List<Map<String, String>> vehicles = Arrays.asList(
            new HashMap<>() {{
                put("VIN", "1234");
                put("STATE", "?");
                put("active", "Y");
            }},
            new HashMap<>() {{
                put("VIN", "1234");
                put("STATE", "VA");
                put("active", "Y");
            }},
            new HashMap<>() {{
                put("VIN", "56789");
                put("STATE", "?");
                put("active", "Y");
            }},
            new HashMap<>() {{
                put("VIN", "678546");
                put("STATE", "MA");
                put("active", "Y");
            }}
        );

        // Group by VIN
        Map<String, List<Map<String, String>>> groupedByVin = vehicles.stream()
            .collect(Collectors.groupingBy(vehicle -> vehicle.get("VIN")));

        // Process each group
        groupedByVin.values().forEach(group -> {
            boolean hasValidState = group.stream()
                .anyMatch(vehicle -> !"?".equals(vehicle.get("STATE")));

            if (hasValidState) {
                group.stream()
                    .filter(vehicle -> "?".equals(vehicle.get("STATE")))
                    .forEach(vehicle -> vehicle.put("active", "N"));
            }
        });

        // Print the result
        vehicles.forEach(System.out::println);
    }
}
```

# 4. Copying from srce to target using Streams API

1. employee

```java
Employee {

  private Set<Department> departments;

  Employee() {
    departments = initialized with departments
  }
}
```

2. department

```java
import lombok.EqualsAndHashCode;

@EqualsAndHashCode(of = {"name", "otherField1", "otherField2"})
public class Department {
    private String name;
    private String otherField1;
    private String otherField2;

    // constructors, getters, setters, etc.
}
```

3. The copy

```java
srceEmployee.getDepartments().stream()
    .filter(department -> !targetEmployee.getDepartments().contains(department))
    .forEach(targetEmployee.getDepartments()::add);
```

# 09132024

- Animal

```java
import java.time.LocalDate;

public class Animal {
    private String name;
    private AnimalType type;
    private LocalDate startDate;
    private LocalDate endDate;

    public Animal(String name, AnimalType type, LocalDate startDate) {
        this.name = name;
        this.type = type;
        this.startDate = startDate;
    }

    public String getName() {
        return name;
    }

    public AnimalType getType() {
        return type;
    }

    public LocalDate getStartDate() {
        return startDate;
    }

    public LocalDate getEndDate() {
        return endDate;
    }

    public void setEndDate(LocalDate endDate) {
        this.endDate = endDate;
    }

    @Override
    public String toString() {
        return "Animal{" +
                "name='" + name + '\'' +
                ", type=" + type +
                ", startDate=" + startDate +
                ", endDate=" + endDate +
                '}';
    }
}
```

- ZooRoster

```java
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

public class ZooRoster {
    private List<Animal> animals = new ArrayList<>();

    public void addAnimal(Animal newAnimal) {
        // Find the current animal that is not end-dated
        Optional<Animal> currentAnimalOpt = animals.stream()
            .filter(animal -> animal.getEndDate() == null)
            .findFirst();

        // If no active animal (not end-dated), add the new one
        if (currentAnimalOpt.isEmpty()) {
            animals.add(newAnimal);
            System.out.println(newAnimal.getName() + " added to the zoo.");
            return;
        }

        Animal currentAnimal = currentAnimalOpt.get();

        // If different animal type, end-date the current and add the new animal
        if (!currentAnimal.getType().equals(newAnimal.getType())) {
            endDateAndAdd(currentAnimal, newAnimal);
        } else {
            // Same animal type, end-date the old one and add the new one
            endDateAndAdd(currentAnimal, newAnimal);
        }
    }

    private void endDateAndAdd(Animal oldAnimal, Animal newAnimal) {
        oldAnimal.setEndDate(LocalDate.now());
        System.out.println(oldAnimal.getName() + " (" + oldAnimal.getType() + ") is being removed.");
        animals.add(newAnimal);
        System.out.println(newAnimal.getName() + " (" + newAnimal.getType() + ") added to the zoo.");
    }

    public List<Animal> getAnimals() {
        return animals;
    }
}

```

- Usage

```java
import java.time.LocalDate;

public class ZooTest {
    public static void main(String[] args) {
        ZooRoster zoo = new ZooRoster();

        Animal giraffe1 = new Animal("Giraffe A", AnimalType.GIRAFFE, LocalDate.of(2024, 9, 1));
        Animal elephant1 = new Animal("Elephant A", AnimalType.ELEPHANT, LocalDate.of(2024, 9, 2));
        Animal giraffe2 = new Animal("Giraffe B", AnimalType.GIRAFFE, LocalDate.of(2024, 9, 3));
        Animal elephant2 = new Animal("Elephant B", AnimalType.ELEPHANT, LocalDate.of(2024, 9, 4));

        zoo.addAnimal(giraffe1);
        zoo.addAnimal(elephant1);
        zoo.addAnimal(giraffe2);
        zoo.addAnimal(elephant2);

        zoo.getAnimals().forEach(System.out::println);
    }
}
```